!function t(e,i,n){function r(o,a){if(!i[o]){if(!e[o]){var s="function"==typeof require&&require;if(!a&&s)return s(o,!0);if(l)return l(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[o]={exports:{}};e[o][0].call(h.exports,(function(t){return r(e[o][1][t]||t)}),h,h.exports,t,e,i,n)}return i[o].exports}for(var l="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Ball=void 0;var n,r=(n=t("@tweenjs/tween.js"))&&n.__esModule?n:{default:n},l=t("./tools");function o(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,l=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){o=!0,r=t},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw r}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){function t(e,i,n,r,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.px=0,this.py=0,this.game=l,this.x=e,this.y=i,this.scaleX=0,this.scaleY=0,this.angle=0,this.isVanishing=!1,this.isDisabled=!1,this.colors=new Set,this.cellWidth=n,this.cellHeight=r,this.selectedTween=null}var e,i,n;return e=t,(i=[{key:"setDisabled",value:function(t){this.isDisabled=t}},{key:"getScore",value:function(){return 0}},{key:"getType",value:function(){return"ball"}},{key:"drawBall",value:function(){this.game.ctx.translate(this.px,this.py),this.game.ctx.scale(this.scaleX,this.scaleY),this.game.ctx.rotate(this.angle)}},{key:"vanish",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isVanishing=!0,new r.default.Tween(this).to({scaleX:5,scaleY:5},300).easing(r.default.Easing.Quadratic.In).delay(e).onComplete(t).start()}},{key:"hoover",value:function(t,e,i){var n=(0,l.xy2screen)(t,e,this),o=(0,l.xy2screen)(this.x,this.y,this),a=o.pX-n.pX,s=o.pY-n.pY;this.px=-a,this.py=-s,new r.default.Tween(this).to({scaleX:1.5,scaleY:1.5},250).easing(r.default.Easing.Quadratic.Out).chain(new r.default.Tween(this).to({scaleX:1,scaleY:1},250).easing(r.default.Easing.Quadratic.In)).start(),new r.default.Tween(this).to({px:0,py:0},500).easing(r.default.Easing.Quadratic.InOut).onComplete(i).start()}},{key:"appear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,i=new r.default.Tween(this).to({scaleX:1,scaleY:1},400).easing(r.default.Easing.Quadratic.In).delay(t);e&&i.onComplete(e),i.start()}},{key:"selected",value:function(){var t=new r.default.Tween(this).to({py:0,scaleY:1,scaleX:1},300).easing(r.default.Easing.Quadratic.In),e=new r.default.Tween(this).to({scaleX:1.25,scaleY:.75,py:this.game.cellHeight/8},300).easing(r.default.Easing.Quadratic.Out),i=new r.default.Tween(this).to({scaleX:1,scaleY:1,py:0},200).easing(r.default.Easing.Quadratic.In);this.selectedTween=new r.default.Tween(this).to({py:-this.game.cellHeight/4,scaleY:1.05,scaleX:.95},500).easing(r.default.Easing.Quadratic.Out).chain(t),t.chain(e),e.chain(i),i.chain(this.selectedTween),this.selectedTween.start()}},{key:"deselect",value:function(){if(this.selectedTween){if(Array.isArray(this.selectedTween)){var t,e=o(this.selectedTween);try{for(e.s();!(t=e.n()).done;)t.value.stop()}catch(t){e.e(t)}finally{e.f()}}else this.selectedTween.stop();this.selectedTween=null}this.py=0,this.scaleX=1,this.scaleY=1,this.angle=0}}])&&s(e.prototype,i),n&&s(e,n),t}();i.Ball=c},{"./tools":15,"@tweenjs/tween.js":17}],2:[function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.Cell=void 0;var r=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i,this.game=n,this.ball=null,this.selected=!1}var e,i,r;return e=t,(i=[{key:"setBall",value:function(t){this.ball=t,this.ball.x=this.x,this.ball.y=this.y}},{key:"handleSelect",value:function(t){this.selected=t,t&&this.ball?this.ball.selected():this.ball&&this.ball.deselect()}},{key:"innerDraw",value:function(){var t=-this.game.cellWidth2,e=-this.game.cellHeight2,i=t+this.game.cellWidth-1,n=e+this.game.cellHeight-1;this.selected?(this.game.ctx.fillStyle="#cbcbcb",this.game.ctx.fillRect(t+1,e+1,this.game.cellWidth-2,this.game.cellHeight-2)):this.game.ctx.clearRect(t+1,e+1,this.game.cellWidth-2,this.game.cellHeight-2),this.game.ctx.strokeStyle="#fafffb",this.game.ctx.beginPath(),this.game.ctx.moveTo(i,e),this.game.ctx.lineTo(t,e),this.game.ctx.lineTo(t,n),this.game.ctx.stroke(),this.game.ctx.strokeStyle="#c8cdc9",this.game.ctx.beginPath(),this.game.ctx.moveTo(i,e),this.game.ctx.lineTo(i,n),this.game.ctx.lineTo(t,n),this.game.ctx.stroke()}},{key:"drawCell",value:function(){this.game.ctx.save(),this.game.ctx.translate(this.game.cellWidth*this.x+this.game.cellWidth2,this.game.cellHeight*this.y+this.game.cellHeight2),this.innerDraw(),this.game.ctx.restore()}},{key:"drawBall",value:function(){this.ball&&(this.game.ctx.save(),this.game.ctx.translate(this.game.cellWidth*this.x+this.game.cellWidth2,this.game.cellHeight*this.y+this.game.cellHeight2),this.ball.drawBall(),this.game.ctx.restore())}}])&&n(e.prototype,i),r&&n(e,r),t}();i.Cell=r},{}],3:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.Color=void 0;var l=function(){function t(e,i,r){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;n(this,t),this.red=e,this.green=i,this.blue=r,this.alpha=l}var e,i,l;return e=t,(i=[{key:"lightenColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.2,e=Math.min(this.red*(1+t),255),i=Math.min(this.green*(1+t),255),n=Math.min(this.blue*(1+t),255);return"rgba(".concat(e,",").concat(i,",").concat(n,",").concat(this.alpha,")")}},{key:"darkenColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.8;return"rgba(".concat(this.red*t,",").concat(this.green*t,",").concat(this.blue*t,",").concat(this.alpha,")")}},{key:"clone",value:function(){return new t(this.red,this.green,this.blue,this.alpha)}},{key:"iRequestNormalColor",value:function(){return"rgba(".concat(this.red,",").concat(this.green,",").concat(this.blue,",").concat(this.alpha,")")}}])&&r(e.prototype,i),l&&r(e,l),t}();i.Color=l},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ColorWave=i.colorWave=void 0;var n,r=t("./ball"),l=(n=t("@tweenjs/tween.js"))&&n.__esModule?n:{default:n};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}i.colorWave="colorWave";var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(d,t);var e,i,n,r,o=(e=d,function(){var t,i=f(e);if(u()){var n=f(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return h(this,t)});function d(t,e,i,n,r,l,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(s=o.call(this,t,e,i,n,a)).colors.add(r),s.colorIdx=r,s.color=l.clone(),s}return i=d,(n=[{key:"getType",value:function(){return"colorWave"}},{key:"getScore",value:function(){return 100}},{key:"drawBall",value:function(){s(f(d.prototype),"drawBall",this).call(this);var t=Math.floor(.3125*this.cellHeight),e=t/2.5;this.game.ctx.beginPath(),this.game.ctx.moveTo(t,e),this.game.ctx.lineTo(t,-e),this.game.ctx.lineTo(e,-t),this.game.ctx.lineTo(-e,-t),this.game.ctx.lineTo(-t,-e),this.game.ctx.lineTo(-t,e),this.game.ctx.lineTo(-e,t),this.game.ctx.lineTo(e,t),this.game.ctx.closePath(),this.color.iRequestNormalColor();var i=this.color.darkenColor(.8),n=this.color.lightenColor(.5),r=this.game.ctx.createLinearGradient(-t,-t,t,t);r.addColorStop(0,n),r.addColorStop(1,i),this.game.ctx.fillStyle=r,this.game.ctx.fill(),this.game.ctx.strokeStyle="rgba(68,68,68,0.5)",this.game.ctx.strokeWidth=1,this.game.ctx.stroke(),t*=.7,e*=.7,this.game.ctx.beginPath(),this.game.ctx.moveTo(t,e),this.game.ctx.lineTo(t,-e),this.game.ctx.lineTo(e,-t),this.game.ctx.lineTo(-e,-t),this.game.ctx.lineTo(-t,-e),this.game.ctx.lineTo(-t,e),this.game.ctx.lineTo(-e,t),this.game.ctx.lineTo(e,t),this.game.ctx.closePath();var l=this.game.ctx.createLinearGradient(t,t,-t,-t);l.addColorStop(0,n),l.addColorStop(1,i),this.game.ctx.fillStyle=l,this.game.ctx.fill()}},{key:"selected",value:function(){var t=new l.default.Tween(this).to({angle:2*Math.PI},3e3).repeat(1/0).start(),e=new l.default.Tween(this).to({scaleY:.9,scaleX:.9},500).repeat(1/0).yoyo(!0).easing(l.default.Easing.Elastic.In).start();this.selectedTween=[t,e]}},{key:"vanish",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isVanishing=!0,this.dribbleTween&&(this.dribbleTween.stop(),this.dribbleTween=null),new l.default.Tween(this).to({scaleX:0,scaleY:0},300).easing(l.default.Easing.Quadratic.In).delay(e).start(),new l.default.Tween(this).to({angle:2*Math.PI},300).easing(l.default.Easing.Quadratic.In).delay(e).onComplete(t).start()}},{key:"dribble",value:function(){var t=Math.PI/180*15;this.angle=-t;var e=new l.default.Tween(this).to({angle:t},200),i=new l.default.Tween(this).to({angle:-t},200);e.chain(i),i.chain(e),e.start(),this.dribbleTween=e}}])&&a(i.prototype,n),r&&a(i,r),d}(r.Ball);i.ColorWave=d},{"./ball":1,"@tweenjs/tween.js":17}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ColorWaveTimer=void 0;var n,r=(n=t("@tweenjs/tween.js"))&&n.__esModule?n:{default:n};function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.timeLeft=e,this.game=i,this.animationTime=e}var e,i,n;return e=t,(i=[{key:"draw",value:function(){var t=.56*this.game.hudHeight;this.game.ctx.save(),this.game.ctx.clearRect(0,0,this.game.width,this.game.hudHeight),this.game.ctx.translate(.5*this.game.width,.25*this.game.hudHeight),this.game.ctx.fillStyle="rgb(98,98,98)",this.game.ctx.textAlign="center",this.game.ctx.textBaseline="hanging",this.game.ctx.font="bold ".concat(t,"px MainFont"),this.game.ctx.fillText("".concat(Math.ceil(this.timeLeft/100)/10),0,0),this.game.ctx.restore()}},{key:"animate",value:function(t){new r.default.Tween(this).to({timeLeft:0},this.animationTime).onComplete(t).start()}}])&&l(e.prototype,i),n&&l(e,n),t}();i.ColorWaveTimer=o},{"@tweenjs/tween.js":17}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ContractionBall=i.contractionBall=void 0;var n=t("./regularBall");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}i.contractionBall="contraction";var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(d,t);var e,i,n,r,f=(e=d,function(){var t,i=u(e);if(h()){var n=u(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return c(this,t)});function d(){return l(this,d),f.apply(this,arguments)}return i=d,(n=[{key:"drawBall",value:function(){a(u(d.prototype),"drawBall",this).call(this);var t=Math.floor(.3125*this.cellWidth);this.game.ctx.strokeStyle="black",this.game.ctx.save(),this.game.ctx.lineWidth=3,this.game.ctx.rotate(Math.PI/180*45),this.game.ctx.beginPath(),this.game.ctx.moveTo(0,.025*this.cellHeight),this.game.ctx.lineTo(0,Math.floor(t-.075*this.cellHeight)),this.game.ctx.lineTo(.05*this.cellWidth,.1*this.cellHeight),this.game.ctx.moveTo(0,Math.floor(t-.075*this.cellHeight)),this.game.ctx.lineTo(.05*-this.cellWidth,.1*this.cellHeight),this.game.ctx.moveTo(0,.025*-this.cellHeight),this.game.ctx.lineTo(0,-Math.floor(t-.075*this.cellHeight)),this.game.ctx.lineTo(.05*this.cellWidth,.1*-this.cellHeight),this.game.ctx.moveTo(0,-Math.floor(t-.075*this.cellHeight)),this.game.ctx.lineTo(.05*-this.cellWidth,.1*-this.cellHeight),this.game.ctx.stroke(),this.game.ctx.restore()}},{key:"getType",value:function(){return"contraction"}}])&&o(i.prototype,n),r&&o(i,r),d}(n.RegularBall);i.ContractionBall=f},{"./regularBall":12}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DoubleBall=i.doubleBall=void 0;var n=t("./ball");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}i.doubleBall="double";var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(f,t);var e,i,n,r,u=(e=f,function(){var t,i=h(e);if(c()){var n=h(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return s(this,t)});function f(t,e,i,n,r,l,o,a){var s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),s=u.call(this,t,e,i,n,a);var c=o[r],h=o[l];return s.color1=c.clone(),s.color2=h.clone(),s.colors.add(r),s.colors.add(l),s}return i=f,(n=[{key:"getScore",value:function(){return 10}},{key:"getType",value:function(){return"double"}},{key:"drawBall",value:function(){o(h(f.prototype),"drawBall",this).call(this);var t=-this.game.cellWidth2,e=-this.game.cellHeight2,i=Math.floor(.15*this.cellHeight),n=Math.floor(.16*this.cellHeight),r=Math.floor(.3125*this.cellWidth),l=this.game.ctx.createRadialGradient(-i,-i,0,0,0,r),a=this.game.ctx.createRadialGradient(n,n,0,0,0,r),s=this.game.ctx.createLinearGradient(r,r,-r,-r);l.addColorStop(0,"white"),a.addColorStop(0,"rgba(255,255,255,0.7)"),l.addColorStop(.8,"rgba(255,255,255,0)"),a.addColorStop(.7,"rgba(255,255,255,0)"),s.addColorStop(0,this.color1.iRequestNormalColor()),s.addColorStop(.49,this.color1.iRequestNormalColor()),s.addColorStop(.51,this.color2.iRequestNormalColor()),s.addColorStop(1,this.color2.iRequestNormalColor()),s.addColorStop(1,"transparent"),l.addColorStop(1,"transparent"),a.addColorStop(1,"transparent"),this.game.ctx.fillStyle=s,this.game.ctx.beginPath(),this.game.ctx.arc(.5,.5,r,0,2*Math.PI),this.game.ctx.fill(),this.game.ctx.strokeStyle="rgba(68,68,68,0.5)",this.game.ctx.strokeWidth=1,this.game.ctx.stroke(),this.game.ctx.fillStyle=l,this.game.ctx.fillRect(t,e,this.game.cellWidth,this.game.cellHeight)}}])&&l(i.prototype,n),r&&l(i,r),f}(n.Ball);i.DoubleBall=u},{"./ball":1}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ExpansionBall=i.expansionBall=void 0;var n=t("./regularBall");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}i.expansionBall="expansion";var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(d,t);var e,i,n,r,f=(e=d,function(){var t,i=u(e);if(h()){var n=u(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return c(this,t)});function d(){return l(this,d),f.apply(this,arguments)}return i=d,(n=[{key:"drawBall",value:function(){a(u(d.prototype),"drawBall",this).call(this);var t=Math.floor(.3125*this.cellWidth);this.game.ctx.strokeStyle="black",this.game.ctx.save(),this.game.ctx.lineWidth=3,this.game.ctx.rotate(Math.PI/180*-45),this.game.ctx.beginPath(),this.game.ctx.moveTo(0,.025*this.cellHeight),this.game.ctx.lineTo(0,Math.floor(t-.075*this.cellHeight)),this.game.ctx.moveTo(0,.025*this.cellHeight),this.game.ctx.lineTo(.05*this.cellWidth,.1*this.cellHeight),this.game.ctx.moveTo(0,.025*this.cellHeight),this.game.ctx.lineTo(.05*-this.cellWidth,.1*this.cellHeight),this.game.ctx.moveTo(0,.025*-this.cellHeight),this.game.ctx.lineTo(0,-Math.floor(t-.075*this.cellHeight)),this.game.ctx.moveTo(0,.025*-this.cellHeight),this.game.ctx.lineTo(.05*this.cellWidth,.1*-this.cellHeight),this.game.ctx.moveTo(0,.025*-this.cellHeight),this.game.ctx.lineTo(.05*-this.cellWidth,.1*-this.cellHeight),this.game.ctx.stroke(),this.game.ctx.restore()}},{key:"getType",value:function(){return"expansion"}}])&&o(i.prototype,n),r&&o(i,r),d}(n.RegularBall);i.ExpansionBall=f},{"./regularBall":12}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Game=void 0;var n,r=t("./color"),l=(n=t("@tweenjs/tween.js"))&&n.__esModule?n:{default:n},o=t("./regularBall"),a=t("./doubleBall"),s=t("./cell"),c=t("./tools"),h=t("./scoreFloat"),u=t("./colorWaveBall"),f=t("./expansionBall"),d=t("./contractionBall"),p=t("./colorWaveTimer"),y=t("./superBomb"),v=t("./rainbowBall"),g=t("./x3Ball");function m(t){return function(t){if(Array.isArray(t))return x(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||w(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=w(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,l=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){o=!0,r=t},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw r}}}}function w(t,e){if(t){if("string"==typeof t)return x(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?x(t,e):void 0}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function _(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var k=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=null,this.ctx=null,this.from=null,this.height=0,this.width=0,this.delay=0,this.scaleX=1,this.scaleY=1,this.cellHeight=0,this.cellWidth=0,this.cellHeight2=0,this.cellWidth2=0,this.hudHeight=0,this.blockedCells=[],this.drawOverAll=[],this.blockClick=!1,this.colorWaveTimer=null,this.possibleBallColors=[new r.Color(218,0,25),new r.Color(255,91,0),new r.Color(255,203,1),new r.Color(14,109,0),new r.Color(0,158,255),new r.Color(0,0,255),new r.Color(125,0,125)]}var e,i,n;return e=t,(i=[{key:"resize",value:function(){console.log("resizing"),this.gameHeight=this.canvas.offsetHeight,this.width=this.canvas.offsetWidth,this.hudHeight=this.gameHeight-this.width,this.height=this.gameHeight-this.hudHeight,this.cellHeight=this.height/this.fieldHeight,this.cellWidth=this.width/this.fieldWidth,this.cellHeight2=this.cellHeight/2,this.cellWidth2=this.cellWidth/2,this.canvas.width=this.width,this.canvas.height=this.gameHeight;var t,e=b(this.field);try{for(e.s();!(t=e.n()).done;){var i,n=b(t.value);try{for(n.s();!(i=n.n()).done;){var r=i.value;r.ball&&(r.ball.cellWidth=this.cellWidth,r.ball.cellHeight=this.cellHeight)}}catch(t){n.e(t)}finally{n.f()}}}catch(t){e.e(t)}finally{e.f()}}},{key:"refresh",value:function(t){var e=this;this.animate(t),this.draw(),this.decideToRefresh()&&requestAnimationFrame((function(t){return e.refresh(t)}))}},{key:"animate",value:function(t){l.default.update(t)}},{key:"decideToRefresh",value:function(){return!0}},{key:"initGame",value:function(){this.ballsPerTime=3,this.inARowToVanish=5,this.fieldHeight=8,this.fieldWidth=8,this.score=0,this.earnedScore=0,this.multiplier=1,this.level=1,this.levelToExpand=5,this.levelToContract=3,this.scoreToLevelUp=100,this.levelToAddColor=3,this.isGameOver=!1,this.isColorWaveModeOn=!1,this.possibleBallTypes=[o.regular,o.regular,o.regular,a.doubleBall,o.regular,o.regular,o.regular,o.regular,o.regular,o.regular],this.forcedBallTypes=[g.x3Ball],this.ballsRemoved=0,this.colorWaveIdx=null,this.height&&(this.cellHeight=this.height/this.fieldHeight,this.cellWidth=this.width/this.fieldWidth,this.cellHeight2=this.cellHeight/2,this.cellWidth2=this.cellWidth/2),this.newColorIdx=2,this.field=[],this.oldField=[],this.initField()}},{key:"initField",value:function(){for(var t=0;t<this.fieldHeight;t++){for(var e=[],i=0;i<this.fieldWidth;i++){var n=new s.Cell(i,t,this);e.push(n)}this.field.push(e)}}},{key:"init",value:function(){var t=this;this.initGame(),this.canvas=document.getElementById("field"),this.canvas.onclick=function(e){t.onClick(e.offsetX,e.offsetY)},this.ctx=this.canvas.getContext("2d"),this.gameHeight=this.canvas.offsetHeight,this.width=this.canvas.offsetWidth,this.hudHeight=this.gameHeight-this.width,this.height=this.gameHeight-this.hudHeight,this.cellHeight=this.height/this.fieldHeight,this.cellWidth=this.width/this.fieldWidth,this.cellHeight2=this.cellHeight/2,this.cellWidth2=this.cellWidth/2,this.canvas.width=this.width,this.canvas.height=this.gameHeight,console.log("canvas size is ",this.gameHeight,":",this.width),this.generateBalls()}},{key:"addColorOnLvlUp",value:function(){this.level%this.levelToAddColor==0&&this.newColorIdx<this.possibleBallColors.length-1&&this.newColorIdx++}},{key:"levelUpIfNeeded",value:function(){this.score+this.earnedScore>=this.scoreToLevelUp&&(this.level++,this.multiplier=1.2*this.multiplier,this.scoreToLevelUp=Math.ceil(this.scoreToLevelUp+100*this.multiplier),this.addColorOnLvlUp(),this.expandOnLvlUp(),this.contractOnLvlUp())}},{key:"changeScore",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.earnedScore=Math.floor(this.earnedScore+e*t*i)}},{key:"addBlockedCell",value:function(t){this.blockedCells.push(t)}},{key:"removeBlockedCell",value:function(t){for(var e in this.blockedCells)if(t===this.blockedCells[e]){this.blockedCells.splice(e,1);break}}},{key:"checkForBlockedCell",value:function(t,e){var i,n=b(this.blockedCells);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r.x===t&&r.y===e)return!0}}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"addOverallObject",value:function(t){this.drawOverAll.push(t)}},{key:"removeOverallObject",value:function(t){for(var e in this.drawOverAll)if(t===this.drawOverAll[e]){this.drawOverAll.splice(e,1);break}}},{key:"checkAll",value:function(t,e,i){if(null!==i.ball){var n,r,l,o;this.earnedScore=0;var a=!1,s=[],u=i.ball,f=this.field[e][t],d=this.check(t,e,1,0,u),p=this.check(t,e,-1,0,u,d.colorSet);d.inARow.push(f),(n=d.inARow).push.apply(n,m(p.inARow)),this.isLineComplete(d.inARow)&&(a=!0,s.push.apply(s,m(d.inARow)));var y=this.check(t,e,0,1,u),v=this.check(t,e,0,-1,u,y.colorSet);y.inARow.push(f),(r=y.inARow).push.apply(r,m(v.inARow)),this.isLineComplete(y.inARow)&&(a=!0,s.push.apply(s,m(y.inARow)));var g=this.check(t,e,1,1,u),b=this.check(t,e,-1,-1,u,g.colorSet);g.inARow.push(f),(l=g.inARow).push.apply(l,m(b.inARow)),this.isLineComplete(g.inARow)&&(a=!0,s.push.apply(s,m(g.inARow)));var w=this.check(t,e,1,-1,u),x=this.check(t,e,-1,1,u,w.colorSet);if(w.inARow.push(f),(o=w.inARow).push.apply(o,m(x.inARow)),this.isLineComplete(w.inARow)&&(a=!0,s.push.apply(s,m(w.inARow))),a){this.removeBalls(s);var _=(0,c.xy2screen)(t,e,this);new h.ScoreFloat(this.earnedScore,_.pX,_.pY,this).animate(this),this.scoreAnimation()}return a}}},{key:"prepareNextMove",value:function(t,e,i){this.checkAll(t,e,i)||!0!==this.generateBalls()&&(this.isGameOver=!0)}},{key:"operateGameOver",value:function(){this.isGameOver&&(this.initGame(),this.generateBalls(),this.draw())}},{key:"onClick",value:function(t,e){this.blockClick||(this.isColorWaveModeOn?this.colorWaveClick(t,e):this.regularClick(t,e))}},{key:"colorWaveClick",value:function(t,e){var i=Math.floor(t/this.cellWidth),n=Math.floor((e-this.hudHeight)/this.cellHeight);if(!this.checkForBlockedCell(i,n)){var r=this.field[n][i];r.ball&&r.ball.getType()===u.colorWave&&r.ball.colorIdx===this.colorWaveIdx&&this.removeBalls([r])}}},{key:"regularClick",value:function(t,e){var i=this;this.operateGameOver();var n=Math.floor(t/this.cellWidth),r=Math.floor((e-this.hudHeight)/this.cellHeight);if(!this.checkForBlockedCell(n,r)){var l=this.field[r][n];if(null!==l.ball)this.from&&this.from.handleSelect(!1),this.from!==l?(this.from=l,l.handleSelect(!0)):this.from=null;else if(this.from){this.from.handleSelect(!1),l.setBall(this.from.ball);var o=this.from;this.addBlockedCell(o),this.addBlockedCell(l),l.ball.hoover(this.from.x,this.from.y,(function(){i.removeBlockedCell(o),i.removeBlockedCell(l)})),this.from.ball=null,this.from=null,this.prepareNextMove(n,r,l)}}}},{key:"setBlock",value:function(){this.blockClick=!0}},{key:"removeBlock",value:function(){this.blockClick=!1}},{key:"findEmptyCells",value:function(){var t,e=[],i=b(this.field);try{for(i.s();!(t=i.n()).done;){var n,r=b(t.value);try{for(r.s();!(n=r.n()).done;){var l=n.value;l.ball||e.push(l)}}catch(t){r.e(t)}finally{r.f()}}}catch(t){i.e(t)}finally{i.f()}return 0===e.length&&(this.isGameOver=!0),e}},{key:"addBallToField",value:function(t){var e=this;t.ball=this.createBall(t.x,t.y),t.ball?(t.ball.appear(this.delay,(function(){e.removeBlockedCell(t)})),this.delay=this.delay+100):this.addBallToField(t)}},{key:"initRandomCell",value:function(t){return 0===t.length?null:t[Math.floor(Math.random()*t.length)]}},{key:"checkBalls",value:function(t){var e,i=b(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;null!==n?this.checkAll(n.x,n.y,n):alert("Error!!!")}}catch(t){i.e(t)}finally{i.f()}}},{key:"expandOnLvlUp",value:function(){this.level%this.levelToExpand==0&&this.possibleBallTypes.push(f.expansionBall)}},{key:"expandAnimation",value:function(){var t=this,e=this.fieldWidth/(this.fieldWidth+2);this.setBlock(),new l.default.Tween(this).to({scaleX:e,scaleY:e},1e3).easing(l.default.Easing.Back.In).onComplete((function(){t.expandField(),t.removeBlock()})).start()}},{key:"expandField",value:function(){this.scaleY=1,this.scaleX=1,this.oldField=this.field,this.fieldHeight+=2,this.fieldWidth+=2,this.field=[],this.cellHeight=this.height/this.fieldHeight,this.cellWidth=this.width/this.fieldWidth,this.cellHeight2=this.cellHeight/2,this.cellWidth2=this.cellWidth/2,this.initField();var t,e=b(this.oldField);try{for(e.s();!(t=e.n()).done;){var i,n=b(t.value);try{for(n.s();!(i=n.n()).done;){var r=i.value;r.x++,r.y++;var l=r.x,o=r.y;r.ball&&(r.ball.cellHeight=this.cellHeight,r.ball.cellWidth=this.cellWidth,this.field[o][l].setBall(r.ball))}}catch(t){n.e(t)}finally{n.f()}}}catch(t){e.e(t)}finally{e.f()}}},{key:"contractAnimation",value:function(){var t=this,e=this.fieldWidth/(this.fieldWidth+2);this.setBlock(),this.scaleX=e,this.scaleY=e,new l.default.Tween(this).to({scaleX:1,scaleY:1},1e3).easing(l.default.Easing.Back.Out).onComplete((function(){t.removeBlock()})).start()}},{key:"contractOnLvlUp",value:function(){this.level%this.levelToContract==0&&this.possibleBallTypes.push(d.contractionBall)}},{key:"colorWaveMode",value:function(t){var e=this;if(this.isColorWaveModeOn)this.checkForColorWave()||this.turnOffColorWaveMode(t);else{var i=this.possibleBallColors[t];this.colorWaveIdx=t;var n,r=0,l=b(this.field);try{for(l.s();!(n=l.n()).done;){var o,a=b(n.value);try{var s=function(){var n=o.value;n.ball&&n.ball.colorIdx===t&&!n.ball.isVanishing&&(n.setBall(new u.ColorWave(n.x,n.y,e.cellWidth,e.cellHeight,t,i,e)),n.ball.appear(50*r,(function(){n.ball.dribble()})),r++)};for(a.s();!(o=a.n()).done;)s()}catch(t){a.e(t)}finally{a.f()}}}catch(t){l.e(t)}finally{l.f()}if(0===r)return;this.colorWaveTimer=new p.ColorWaveTimer(5e3,this),this.addOverallObject(this.colorWaveTimer),this.colorWaveTimer.animate((function(){e.turnOffColorWaveMode(t)})),this.isColorWaveModeOn=!0}}},{key:"checkForColorWave",value:function(){var t,e=b(this.field);try{for(e.s();!(t=e.n()).done;){var i,n=b(t.value);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r.ball&&r.ball.getType()===u.colorWave&&!r.ball.isVanishing&&r.ball.colorIdx===this.colorWaveIdx)return!0}}catch(t){n.e(t)}finally{n.f()}}}catch(t){e.e(t)}finally{e.f()}return!1}},{key:"turnOffColorWaveMode",value:function(t){this.removeOverallObject(this.colorWaveTimer),this.colorWaveTimer=null,this.colorWaveIdx=null,this.isColorWaveModeOn=!1;var e,i=this.possibleBallColors[t],n=b(this.field);try{for(n.s();!(e=n.n()).done;){var r,l=b(e.value);try{for(l.s();!(r=l.n()).done;){var a=r.value;a.ball&&a.ball.getType()===u.colorWave&&a.ball.colorIdx===t&&!a.ball.isVanishing&&(a.setBall(new o.RegularBall(a.x,a.y,t,i,this.cellWidth,this.cellHeight,this)),a.ball.appear())}}catch(t){l.e(t)}finally{l.f()}}}catch(t){n.e(t)}finally{n.f()}}},{key:"contractRemoveBalls",value:function(){var t=this,e=[];this.setBlock();for(var i=0;i<this.fieldWidth;i++){var n=this.field[0],r=this.field[this.fieldHeight-1],l=n[i],o=r[i];l.ball&&e.push(l),o.ball&&e.push(o)}for(var a=1;a<this.fieldHeight-1;a++){var s=this.field[a][0],c=this.field[a][this.fieldWidth-1];s.ball&&(s.ball.setDisabled(!0),e.push(s)),c.ball&&(c.ball.setDisabled(!0),e.push(c))}this.removeBalls(e,(function(e,i){i&&(t.contractField(),t.removeBlock())}))}},{key:"contractField",value:function(){if(this.fieldWidth>6){this.scaleY=1,this.scaleX=1,this.oldField=this.field,this.fieldHeight-=2,this.fieldWidth-=2,this.field=[],this.cellHeight=this.height/this.fieldHeight,this.cellWidth=this.width/this.fieldWidth,this.cellHeight2=this.cellHeight/2,this.cellWidth2=this.cellWidth/2,this.initField();for(var t=1;t<this.oldField.length-1;t++)for(var e=this.oldField[t],i=1;i<e.length-1;i++){var n=e[i];n.x--,n.y--;var r=n.x,l=n.y;n.ball&&(n.ball.cellHeight=this.cellHeight,n.ball.cellWidth=this.cellWidth,this.field[l][r].setBall(n.ball))}this.contractAnimation()}}},{key:"superBombRemoveBalls",value:function(){var t=this;this.setBlock(),this.earnedScore=-Math.floor(.25*this.score),this.scoreAnimation();for(var e=[],i=0;i<this.field.length;i++){var n,r=b(this.field[i]);try{for(r.s();!(n=r.n()).done;){var l=n.value;l.handleSelect(!1),l.ball&&(l.ball.setDisabled(!0),e.push(l))}}catch(t){r.e(t)}finally{r.f()}}this.removeBalls(e,(function(e,i){i&&t.generateBalls()}))}},{key:"vanishCallBack",value:function(t,e){t.ball&&!t.ball.isDisabled&&(t.ball instanceof f.ExpansionBall&&this.expandAnimation(),t.ball instanceof d.ContractionBall&&this.contractRemoveBalls(),t.ball instanceof y.SuperBomb&&this.superBombRemoveBalls(),t.ball instanceof u.ColorWave&&this.colorWaveMode(t.ball.colorIdx)),t.ball=null,t.handleSelect(!1),e&&(this.levelUpIfNeeded(),this.removeBlock())}},{key:"isLineComplete",value:function(t){return t.length>=this.inARowToVanish}},{key:"removeBalls",value:function(t,e){var i=this,n=0,r=0,l=1;t.length>=this.inARowToVanish+1&&this.possibleBallTypes.push(v.rainbow);var o=function(o){var a=t[o];r+=a.ball.getScore(),i.addBlockedCell(a),a.ball.getType()===g.x3Ball&&(l*=3),i.incrementRemovedBalls(),a.ball.vanish((function(){var n=parseInt(o)===t.length-1;i.removeBlockedCell(a),e?(a.ball=null,a.handleSelect(!1),e(a,n)):i.vanishCallBack(a,n)}),n),n+=100};for(var a in t)o(a);this.changeScore(this.multiplier,r,l)}},{key:"incrementRemovedBalls",value:function(){this.ballsRemoved++,this.ballsRemoved%29==0&&this.forcedBallTypes.push(u.colorWave)}},{key:"generateBalls",value:function(){for(var t=[],e=0;e<this.ballsPerTime;e++){var i=this.initRandomCell(this.findEmptyCells());null!==i&&(this.addBallToField(i),t.push(i),this.addBlockedCell(i))}var n=this.findEmptyCells();return 0===n.length?(this.delay=0,!1):(n.length<=.33*this.fieldHeight*this.fieldWidth&&!this.checkForSuperBombs()&&this.forcedBallTypes.push(y.superBomb),this.checkBalls(t),this.delay=0,!0)}},{key:"checkForSuperBombs",value:function(){var t,e=b(this.field);try{for(e.s();!(t=e.n()).done;){var i,n=b(t.value);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r.ball&&r.ball.getType()===y.superBomb)return!0}}catch(t){n.e(t)}finally{n.f()}}}catch(t){e.e(t)}finally{e.f()}return!1}},{key:"removeBallType",value:function(t){var e=this.possibleBallTypes.findIndex((function(e){return e===t}));this.possibleBallTypes.splice(e,1)}},{key:"createBall",value:function(t,e){switch(0===this.forcedBallTypes.length?this.possibleBallTypes[Math.floor(Math.random()*this.possibleBallTypes.length)]:this.forcedBallTypes.shift()){case o.regular:var i=this.getRandomColorIdx(),n=this.possibleBallColors[i];return new o.RegularBall(t,e,i,n,this.cellWidth,this.cellHeight,this);case v.rainbow:return this.removeBallType(v.rainbow),new v.RainbowBall(t,e,this.cellHeight,this.cellWidth,this.possibleBallColors,this);case a.doubleBall:for(var r=this.getRandomColorIdx(),l=this.getRandomColorIdx();r===l;)l=this.getRandomColorIdx();return new a.DoubleBall(t,e,this.cellWidth,this.cellHeight,r,l,this.possibleBallColors,this);case f.expansionBall:this.removeBallType(f.expansionBall);var s=this.getRandomColorIdx(),c=this.possibleBallColors[s];return new f.ExpansionBall(t,e,s,c,this.cellWidth,this.cellHeight,this);case d.contractionBall:this.removeBallType(d.contractionBall);var h=this.getRandomColorIdx(),p=this.possibleBallColors[h];return new d.ContractionBall(t,e,h,p,this.cellWidth,this.cellHeight,this);case y.superBomb:return this.removeBallType(y.superBomb),new y.SuperBomb(t,e,this.cellWidth,this.cellHeight,this.possibleBallColors,this);case u.colorWave:this.removeBallType(u.colorWave);var m=this.getRandomColorIdx(),b=this.possibleBallColors[m];return new u.ColorWave(t,e,this.cellWidth,this.cellHeight,m,b,this);case g.x3Ball:var w=this.getRandomColorIdx(),x=this.possibleBallColors[w];return new g.X3Ball(t,e,w,x,this.cellWidth,this.cellHeight,this)}}},{key:"getRandomColorIdx",value:function(){return Math.floor(Math.random()*(this.newColorIdx+1))}},{key:"check",value:function(t,e,i,n,r,l){for(var o=i,a=n,s=[],h=l||r.colors,u=h;e+i<this.fieldHeight&&t+n<this.fieldWidth&&e+i>=0&&t+n>=0;){var f=this.field[e+i][t+n];if(null===f.ball)break;if(u=h,0===(h=(0,c.intersection)(h,f.ball.colors)).size)return{inARow:s,colorSet:u};s.push(f),n+=a,i+=o}return{inARow:s,colorSet:h}}},{key:"scoreAnimation",value:function(){new l.default.Tween(this).to({score:this.score+this.earnedScore},1e3).easing(l.default.Easing.Quadratic.Out).start()}},{key:"drawHUD",value:function(){var t=.36*this.hudHeight,e=.2*this.hudHeight,i=.44*this.hudHeight;this.ctx.font="bold ".concat(i,"px MainFont"),this.ctx.textBaseline="top",this.ctx.textAlign="start",this.ctx.fillStyle="rgb(98,98,98)",this.ctx.fillText("Score: ".concat(Math.floor(this.score)),e,t),this.ctx.textAlign="end",this.ctx.fillText("Lvl Up: ".concat(Math.floor(this.scoreToLevelUp-this.score)),this.width-e,t),this.ctx.textAlign="center",this.ctx.fillText("Lvl: ".concat(this.level),this.width/2,t)}},{key:"drawFieldContent",value:function(){this.ctx.save(),this.ctx.translate(0,this.hudHeight),this.scaleX<1&&(this.ctx.translate(this.width/2,this.gameHeight/2),this.ctx.scale(this.scaleX,this.scaleY),this.ctx.translate(-this.width/2,-this.gameHeight/2));var t,e=b(this.field);try{for(e.s();!(t=e.n()).done;){var i,n=b(t.value);try{for(n.s();!(i=n.n()).done;)i.value.drawCell(this)}catch(t){n.e(t)}finally{n.f()}}}catch(t){e.e(t)}finally{e.f()}var r,l=b(this.field);try{for(l.s();!(r=l.n()).done;){var o,a=b(r.value);try{for(a.s();!(o=a.n()).done;)o.value.drawBall(this)}catch(t){a.e(t)}finally{a.f()}}}catch(t){l.e(t)}finally{l.f()}this.ctx.restore()}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.width,this.gameHeight),this.drawHUD(),this.drawFieldContent(),this.drawLast(),this.isGameOver&&this.drawGameOver()}},{key:"drawLast",value:function(){for(var t in this.drawOverAll)this.drawOverAll[t].draw()}},{key:"drawGameOver",value:function(){this.ctx.fillStyle="rgba(0, 0, 0, 0.25)";var t=.098*this.gameHeight;this.ctx.fillRect(0,0,this.width,this.gameHeight),this.ctx.font="bold ".concat(t,"px MainFont"),this.ctx.fillStyle="rgb(180,0,46)",this.ctx.strokeStyle="rgb(255, 255, 255)",this.ctx.strokeWidth=3,this.ctx.textAlign="center",this.ctx.fillText("GAME OVER",this.width/2,this.height/2),this.ctx.strokeText("GAME OVER",this.width/2,this.height/2)}}])&&_(e.prototype,i),n&&_(e,n),t}();i.Game=k},{"./cell":2,"./color":3,"./colorWaveBall":4,"./colorWaveTimer":5,"./contractionBall":6,"./doubleBall":7,"./expansionBall":8,"./rainbowBall":11,"./regularBall":12,"./scoreFloat":13,"./superBomb":14,"./tools":15,"./x3Ball":16,"@tweenjs/tween.js":17}],10:[function(t,e,i){"use strict";var n=t("./game");window.onload=function(){r.init(),r.refresh(performance.now())},window.onresize=function(){r.resize()};var r=new n.Game},{"./game":9}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.RainbowBall=i.rainbow=void 0;var n=t("./ball"),r=t("./color");function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,l=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){o=!0,r=t},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw r}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,i){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}i.rainbow="rainbow";var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(p,t);var e,i,n,l,a=(e=p,function(){var t,i=d(e);if(f()){var n=d(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return u(this,t)});function p(t,e,i,n,l,o){var s;for(var c in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(s=a.call(this,t,e,n,i,o)).actualColors=[],l){var h=l[c];s.colors.add(parseInt(c)),s.actualColors.push(new r.Color(h.red,h.green,h.blue))}return s}return i=p,(n=[{key:"getScore",value:function(){return 25}},{key:"getType",value:function(){return"rainbow"}},{key:"drawBall",value:function(){c(d(p.prototype),"drawBall",this).call(this);var t=-this.game.cellWidth2,e=-this.game.cellHeight2,i=Math.floor(.15*this.cellHeight),n=Math.floor(.16*this.cellHeight),r=Math.floor(.3125*this.cellWidth),l=this.game.ctx.createRadialGradient(-i,-i,0,0,0,r),a=this.game.ctx.createRadialGradient(n,n,0,0,0,r),s=this.game.ctx.createRadialGradient(0,0,0,0,0,r);l.addColorStop(0,"white"),a.addColorStop(0,"rgba(255,255,255,0.7)"),l.addColorStop(.8,"rgba(255,255,255,0)"),a.addColorStop(.7,"rgba(255,255,255,0)");var h,u=0,f=o(this.actualColors);try{for(f.s();!(h=f.n()).done;){var y=h.value;s.addColorStop(u,y.iRequestNormalColor()),u+=.15}}catch(t){f.e(t)}finally{f.f()}s.addColorStop(1,"transparent"),l.addColorStop(1,"transparent"),a.addColorStop(1,"transparent"),this.game.ctx.fillStyle=s,this.game.ctx.fillRect(t,e,this.game.cellWidth,this.game.cellHeight),this.game.ctx.fillStyle=l,this.game.ctx.fillRect(t,e,this.game.cellWidth,this.game.cellHeight),this.game.ctx.fillStyle=a,this.game.ctx.fillRect(t,e,this.game.cellWidth,this.game.cellHeight)}}])&&s(i.prototype,n),l&&s(i,l),p}(n.Ball);i.RainbowBall=p},{"./ball":1,"./color":3}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.RegularBall=i.regular=void 0;var n,r=t("./ball"),l=(n=t("@tweenjs/tween.js"))&&n.__esModule?n:{default:n};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}i.regular="regular";var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(d,t);var e,i,n,r,o=(e=d,function(){var t,i=f(e);if(u()){var n=f(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return h(this,t)});function d(t,e,i,n,r,l,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(s=o.call(this,t,e,r,l,a)).colors.add(i),s.color=n.clone(),s.colorIdx=i,s}return i=d,(n=[{key:"getScore",value:function(){return 5}},{key:"getType",value:function(){return"regular"}},{key:"vanish",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(f(d.prototype),"vanish",this).call(this,t,e),new l.default.Tween(this.color).to({alpha:0},300).easing(l.default.Easing.Quadratic.In).delay(e).start()}},{key:"drawBall",value:function(){s(f(d.prototype),"drawBall",this).call(this);var t=-this.game.cellWidth2,e=-this.game.cellHeight2,i=this.color.iRequestNormalColor(),n=Math.floor(.15*this.cellHeight),r=Math.floor(.3125*this.cellWidth),l=this.game.ctx.createRadialGradient(-n,-n,0,0,0,r);l.addColorStop(0,"white"),l.addColorStop(.7,i),l.addColorStop(.9,i),l.addColorStop(1,"transparent"),this.game.ctx.fillStyle=l,this.game.ctx.fillRect(t,e,this.game.cellWidth,this.game.cellHeight)}}])&&a(i.prototype,n),r&&a(i,r),d}(r.Ball);i.RegularBall=d},{"./ball":1,"@tweenjs/tween.js":17}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ScoreFloat=void 0;var n,r=(n=t("@tweenjs/tween.js"))&&n.__esModule?n:{default:n};function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(e,i,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.score=e,this.px=i,this.py=n,this.game=r,this.opacity=1}var e,i,n;return e=t,(i=[{key:"animate",value:function(){var t=this;this.game.addOverallObject(this),new r.default.Tween(this).to({py:this.py-3*this.game.cellHeight,opacity:0},500).easing(r.default.Easing.Quadratic.In).onComplete((function(){t.game.removeOverallObject(t)})).start()}},{key:"draw",value:function(){this.game.ctx.save(),this.game.ctx.translate(this.px,this.py),this.game.ctx.fillStyle="rgba(14,109,0, ".concat(this.opacity,")"),this.game.ctx.strokeStyle="rgba(255,255,255, ".concat(this.opacity,")"),this.game.ctx.strokeWidth=1,this.game.ctx.font="bold 32px MainFont",this.game.ctx.textAlign="center",this.game.ctx.fillText("".concat(this.score),0,0),this.game.ctx.strokeText("".concat(this.score),0,0),this.game.ctx.restore()}}])&&l(e.prototype,i),n&&l(e,n),t}();i.ScoreFloat=o},{"@tweenjs/tween.js":17}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SuperBomb=i.superBomb=void 0;var n=t("./rainbowBall");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}i.superBomb="superBomb";var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(f,t);var e,i,n,r,u=(e=f,function(){var t,i=h(e);if(c()){var n=h(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return s(this,t)});function f(){return l(this,f),u.apply(this,arguments)}return i=f,(n=[{key:"drawBall",value:function(){var t=-this.game.cellWidth2,e=-this.game.cellHeight2,i=Math.floor(.15*this.cellHeight),n=Math.floor(.3125*this.cellHeight);this.game.ctx.translate(this.px,this.py),this.game.ctx.scale(this.scaleX,this.scaleY);var r=this.game.ctx.createRadialGradient(-i,-i,0,0,0,n);r.addColorStop(0,"white"),r.addColorStop(.7,"black"),r.addColorStop(.9,"black"),r.addColorStop(1,"transparent"),this.game.ctx.fillStyle=r,this.game.ctx.fillRect(t,e,this.cellWidth,this.cellHeight),this.game.ctx.font="bold ".concat(.5*n,"px SmallPixel"),this.game.ctx.fillStyle="red",this.game.ctx.textAlign="center",this.game.ctx.textBaseline="middle",this.game.ctx.strokeStyle="white",this.game.ctx.strokeWidth=1,this.game.ctx.fillText("-25%",0,0)}},{key:"getType",value:function(){return"superBomb"}}])&&o(i.prototype,n),r&&o(i,r),f}(n.RainbowBall);i.SuperBomb=u},{"./rainbowBall":11}],15:[function(t,e,i){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Object.defineProperty(i,"__esModule",{value:!0}),i.intersection=function(t,e){var i,r=new Set,l=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,l=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw l}}}}(e);try{for(l.s();!(i=l.n()).done;){var o=i.value;t.has(o)&&r.add(o)}}catch(t){l.e(t)}finally{l.f()}return r},i.xy2screen=function(t,e,i){var n=t*i.cellWidth+i.cellWidth/2,r=e*i.cellHeight+i.cellHeight/2;return{pX:n,pY:r}}},{}],16:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.X3Ball=i.x3Ball=void 0;var n,r=t("./regularBall"),l=(n=t("@tweenjs/tween.js"))&&n.__esModule?n:{default:n};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}i.x3Ball="x3";var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(d,t);var e,i,n,r,o=(e=d,function(){var t,i=f(e);if(u()){var n=f(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return h(this,t)});function d(t,e,i,n,r,l,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(s=o.call(this,t,e,i,n,r,l,a)).opacity=1,s}return i=d,(n=[{key:"getType",value:function(){return"x3"}},{key:"drawBall",value:function(){s(f(d.prototype),"drawBall",this).call(this);var t=Math.floor(.3125*this.cellHeight);this.game.ctx.font="bold ".concat(.55*t,"px SmallPixel"),this.game.ctx.textAlign="center",this.game.ctx.textBaseline="middle",this.game.ctx.fillStyle="rgba(0,0,0,".concat(this.opacity,")"),this.game.ctx.fillText("x3",0,0)}},{key:"vanish",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(f(d.prototype),"vanish",this).call(this,t,e),new l.default.Tween(this).to({opacity:0},300).easing(l.default.Easing.Quadratic.In).delay(e).start()}}])&&a(i.prototype,n),r&&a(i,r),d}(r.RegularBall);i.X3Ball=d},{"./regularBall":12,"@tweenjs/tween.js":17}],17:[function(t,e,i){(function(t){"use strict";var i=function(){this._tweens={},this._tweensAddedDuringUpdate={}};i.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var i=Object.keys(this._tweens);if(0===i.length)return!1;for(t=void 0!==t?t:r.now();i.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<i.length;n++){var l=this._tweens[i[n]];l&&!1===l.update(t)&&(l._isPlaying=!1,e||delete this._tweens[i[n]])}i=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var n,r=new i;r.Group=i,r._nextId=0,r.nextId=function(){return r._nextId++},"undefined"==typeof self&&void 0!==t&&t.hrtime?r.now=function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?r.now=self.performance.now.bind(self.performance):void 0!==Date.now?r.now=Date.now:r.now=function(){return(new Date).getTime()},r.Tween=function(t,e){this._isPaused=!1,this._pauseStart=null,this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=r.Easing.Linear.None,this._interpolationFunction=r.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||r,this._id=r.nextId(),this._isChainStopped=!1},r.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},isPaused:function(){return this._isPaused},to:function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},duration:function(t){return this._duration=t,this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==t?"string"==typeof t?r.now()+parseFloat(t):t:r.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(void 0===this._valuesStart[e]&&(this._valuesStart[e]=this._object[e]),this._valuesStart[e]instanceof Array==!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this):this},end:function(){return this.update(1/0),this},pause:function(t){return this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=void 0===t?r.now():t,this._group.remove(this)),this},resume:function(t){return this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=(void 0===t?r.now():t)-this._pauseStart,this._pauseStart=0,this._group.add(this),this):this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,i,n;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(t-this._startTime)/this._duration,i=0===this._duration||i>1?1:i,n=this._easingFunction(i),this._valuesEnd)if(void 0!==this._valuesStart[e]){var r=this._valuesStart[e]||0,l=this._valuesEnd[e];l instanceof Array?this._object[e]=this._interpolationFunction(l,n):("string"==typeof l&&(l="+"===l.charAt(0)||"-"===l.charAt(0)?r+parseFloat(l):parseFloat(l)),"number"==typeof l&&(this._object[e]=r+(l-r)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var o=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=o}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,s=this._chainedTweens.length;a<s;a++)this._chainedTweens[a].start(this._startTime+this._duration);return!1}return!0}},r.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-r.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*r.Easing.Bounce.In(2*t):.5*r.Easing.Bounce.Out(2*t-1)+.5}}},r.Interpolation={Linear:function(t,e){var i=t.length-1,n=i*e,l=Math.floor(n),o=r.Interpolation.Utils.Linear;return e<0?o(t[0],t[1],n):e>1?o(t[i],t[i-1],i-n):o(t[l],t[l+1>i?i:l+1],n-l)},Bezier:function(t,e){for(var i=0,n=t.length-1,l=Math.pow,o=r.Interpolation.Utils.Bernstein,a=0;a<=n;a++)i+=l(1-e,n-a)*l(e,a)*t[a]*o(n,a);return i},CatmullRom:function(t,e){var i=t.length-1,n=i*e,l=Math.floor(n),o=r.Interpolation.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(l=Math.floor(n=i*(1+e))),o(t[(l-1+i)%i],t[l],t[(l+1)%i],t[(l+2)%i],n-l)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(o(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):o(t[l?l-1:0],t[l],t[i<l+1?i:l+1],t[i<l+2?i:l+2],n-l)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=r.Interpolation.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:(n=[1],function(t){var e=1;if(n[t])return n[t];for(var i=t;i>1;i--)e*=i;return n[t]=e,e}),CatmullRom:function(t,e,i,n,r){var l=.5*(i-t),o=.5*(n-e),a=r*r;return(2*e-2*i+l+o)*(r*a)+(-3*e+3*i-2*l-o)*a+l*r+e}}},r.version="18.5.0",e.exports=r}).call(this,t("_process"))},{_process:18}],18:[function(t,e,i){var n,r,l=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,h=[],u=!1,f=-1;function d(){u&&c&&(u=!1,c.length?h=c.concat(h):f=-1,h.length&&p())}function p(){if(!u){var t=s(d);u=!0;for(var e=h.length;e;){for(c=h,h=[];++f<e;)c&&c[f].run();f=-1,e=h.length}c=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function v(){}l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new y(t,e)),1!==h.length||u||s(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=v,l.addListener=v,l.once=v,l.off=v,l.removeListener=v,l.removeAllListeners=v,l.emit=v,l.prependListener=v,l.prependOnceListener=v,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}]},{},[10]);